# description
AKQゲームの戦術アルゴリズムの優劣を競うため、アルゴリズム同士を対戦させるプログラムです。

# usage
`ruby AKQGame.rb {strategy1} {strategy2}`

e.g.  `ruby AKQGame.rb Rand Honest`

引数には対戦させる戦術アルゴリズムを指定します。
戦術アルゴリズムは `Strategy` を継承したクラスで実装し、`strategies` ディレクトリ配下に配置します。(Rand.rb と Honest.rb が strategies に配置されています)


# 今後の展望
* 戦術アルゴリズムに timeout 制限を付ける
* 戦術アルゴリズムは別プロセスで動かすことで、戦術アルゴリズムのメモリオーバー等で対戦プログラム自体は落ちないようにする
* 現在は単に 2 つの戦術アルゴリズムを対戦させるだけですが、複数のアルゴリズムで総当たり対戦や、複数回の対戦(相手の特徴を記録して次の対戦に生かす)できるようにする
* テストコードを作成する

# AKQゲームについて

AKQゲームはノーリミット・テキサスホールデムのエッセンスを抽出した簡易的なゲームです。  
2人のプレイヤーで対戦します。  
初期状態ではお互い N ポイントを持っており、対局者からポイントを奪うことを目的とするゼロサムゲームです。  

## rules
A、K、Q の3枚のカードを使います。  
先手に3枚のカードからランダムに1枚を配り、後手に残りの2枚からランダムに1枚を配ります。  
それぞれのプレイヤーは自分に配られたカードを見ることができますが、相手に配られたカードをゲーム中に見ることはできません。  
最初にそれぞれのプレイヤーは1ポイントを参加費として供出してゲームを開始します。  
先手は、0ポイント以上の任意のポイントをベットします。  
後手は、ゲームから降りる(フォールド)、相手のベット額と同額を支払う(コール)、ベット額を吊り上げる(レイズ)を選択します。  
フォールドした場合は、参加費は相手プレイヤーが獲得します。  
コールした場合は、お互いのカードを公開してより強いカードを持っている側が参加費およびベット額を全て獲得します。  
カードの強さは A が最も強く、続いて K、Q の順番です。  
レイズした場合は、続いて先手にフォールド、コール、レイズを選択が発生します。  
これを片方がコールまたはフォールドするまで繰り返します。(フォールドした場合は、それまでに宣言したすべてのレイズ額も相手プレイヤーが獲得します)  

e.g. 1  
先手の Alice が K、後手の Bob が Q を持っています。  
turn 1: Alice は 2 ポイントをベットしました。  
turn 2: Bob は 5 ポイントにレイズしました。  
turn 3: Alice はコールを選択しました。すでに 2 ポイントをベットしていまるので、追加の 3 ポイント(合計5ポイント)を支払います。  
ここでカードを公開し、強いカードを持っている Alice が参加費の 2ポイントおよび支払われた 10 ポイントの合計 12 ポイントを獲得しました。  

e.g. 2  
先手の Alice が K、後手の Bob が Q を持っています。  
turn 1: Alice は 0 ポイントをベットしました。  
turn 2: Bob は 2 ポイントにレイズしました。  
turn 3: Alice は フォールドを選択しました。  
Bob が 参加費の 2 ポイントおよびレイズで支払われた 2 ポイントの合計 4 ポイントを獲得しました。  


## 詳細ルール
### レイズ額について
レイズ額は相手が上乗せした以上のポイントを上乗せする必要があります。  
たとえば e.g.1 の turn 2 で Bob が 3 ポイント上乗せして 5 ポイントでレイズしていますので、
turn 3 で Alice がレイズを選択する場合は +3 ポイント以上を上乗せする 8 ポイント以上を選択する必要があります。  
なお 8 ポイントにレイズする場合、turn 1 で 2 ポイントを支払っていますので追加の 6 ポイントを支払います。  

### All in について
Bob の残りポイントが 30 ポイントの時に Alice が 40 ポイントベットしたとします。  
Bob は残りポイント全てを支払って勝負をする All in を選択することができます。  
その場合 Alice は余分な 10 ポイントを手元に戻し、30ポイント + 30 ポイントでの勝負になります。  
また All in の場合は上記レイズ額に満たない場合でもレイズを選択できます。  
